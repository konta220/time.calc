<html lang="ja">

<head>
    <meta charset="UTF-8" lang="ja">
    <meta http-equiv="content-language" content="ja">
    <title>Time.calc</title>
    <meta name="author" content="konta220">
    <meta name="theme-color" content="#375a7f">
    <meta name="description" content="Time calculator">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.1.3/darkly/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-w+yWASP3zYNxxvwoQBD5fUSc1tctKq4KUiZzxgkBSJACiUp+IbweVKvsEhMI+gz7" crossorigin="anonymous">
</head>

<body>
    <div id="app" class="container">
        <div class="row">
            <div class="col-12">
                <h1>Time.calc</h1>
                <h2 id="viewDay"></h2>
                <script>
                    function ViewDay(date) {
                        const year = date.getFullYear();
                        const month = ('0' + (date.getMonth() + 1)).slice(-2);
                        const day = ('0' + date.getDate()).slice(-2);
                        const today = year + '/' + month + '/' + day;

                        const hour = ('0' + date.getHours()).slice(-2);
                        const minute = ('0' + date.getMinutes()).slice(-2);
                        const second = ('0' + date.getSeconds()).slice(-2);
                        const millisecond = ('0' + date.getMilliseconds()).slice(-2);
                        const now = hour + ':' + minute + ':' + second;

                        document.getElementById('viewDay').textContent = today + ' ' + now;
                    }

                    setInterval(() => {
                        const date = new Date();

                        ViewDay(date);
                        ViewCalendar(date);
                    }, 100);
                </script>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div id="calendar1-title" class="month-Tile"></div>
                <div id="calendar1" class="calendar-wrap"></div>
            </div>
            <div class="col">
                <div id="calendar2-title" class="month-Tile"></div>
                <div id="calendar2" class="calendar-wrap"></div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col">
                <div id="month-info1"></div>
            </div>
            <div class="col">
                <div id="month-info2"></div>
            </div>

        </div>

        <a id="github" href="https://github.com/konta220/time.calc" target="_blank" rel="noopener">View on GitHub</a>
        <style>
            .container {
                padding: 1rem;
            }

            .calendar-wrap {
                padding: 0 0.5rem;
            }

            .calendar {
                width: 100%;
                border-collapse: collapse;
            }

            .month-Tile {
                margin-top: 1rem;
                text-align: center;
                font-size: 1.5rem;
            }

            .calendar th {
                font-weight: bold;
            }

            .calendar th,
            .calendar td {
                border: 1px solid #000;
                text-align: center;
                padding: 10px;
                font-size: 14px;
            }

            .calendar th {
                padding: 6px 10px;
            }

            @media (max-width: 767.98px) {

                .calendar th,
                .calendar td {
                    padding: 6px;
                    font-size: 12px;
                }

                .calendar th {
                    padding: 3px 6px;
                }
            }

            .calendar .sun {
                color: darkred;
                background-color: #f8e4e2;
            }

            .calendar .holiday {
                color: darkred;
                background-color: #f8e4e2;
            }

            .calendar .sat {
                color: darkblue;
                background-color: lightblue;
            }

            .calendar .mute {
                color: #707070;
            }

            .calendar .today {
                background-color: #15ff00;
                color: #000;
                font-weight: bold;
            }

            a#github {
                padding: 10px 50px 10px 10px;
                margin-bottom: 1rem;
                border-radius: 4px;
                color: #fff;
                float: right;
                background: url(https://pages-themes.github.io/slate/assets/images/blacktocat.png) #0090ff no-repeat 95% 50%;
            }
        </style>

        <script>
            const holiday = {
                "2025-01-01": "元日",
                "2025-01-13": "成人の日",
                "2025-02-11": "建国記念の日",
                "2025-02-23": "天皇誕生日",
                "2025-02-24": "天皇誕生日 振替休日",
                "2025-03-20": "春分の日",
                "2025-04-29": "昭和の日",
                "2025-05-03": "憲法記念日",
                "2025-05-04": "みどりの日",
                "2025-05-05": "こどもの日",
                "2025-05-06": "みどりの日 振替休日",
                "2025-07-21": "海の日",
                "2025-08-11": "山の日",
                "2025-09-15": "敬老の日",
                "2025-09-23": "秋分の日",
                "2025-10-13": "スポーツの日",
                "2025-11-03": "文化の日",
                "2025-11-23": "勤労感謝の日",
                "2025-11-24": "勤労感謝の日 振替休日",
                "2026-01-01": "元日",
                "2026-01-12": "成人の日",
                "2026-02-11": "建国記念の日",
                "2026-02-23": "天皇誕生日",
                "2026-03-20": "春分の日",
                "2026-04-29": "昭和の日",
                "2026-05-03": "憲法記念日",
                "2026-05-04": "みどりの日",
                "2026-05-05": "こどもの日",
                "2026-05-06": "憲法記念日 振替休日",
                "2026-07-20": "海の日",
                "2026-08-11": "山の日",
                "2026-09-21": "敬老の日",
                "2026-09-22": "国民の休日",
                "2026-09-23": "秋分の日",
                "2026-10-12": "スポーツの日",
                "2026-11-03": "文化の日",
                "2026-11-23": "勤労感謝の日",
                "2027-01-01": "元日",
                "2027-01-11": "成人の日",
                "2027-02-11": "建国記念の日",
                "2027-02-23": "天皇誕生日",
                "2027-03-21": "春分の日",
                "2027-03-22": "春分の日 振替休日",
                "2027-04-29": "昭和の日",
                "2027-05-03": "憲法記念日",
                "2027-05-04": "みどりの日",
                "2027-05-05": "こどもの日",
                "2027-07-19": "海の日",
                "2027-08-11": "山の日",
                "2027-09-20": "敬老の日",
                "2027-09-23": "秋分の日",
                "2027-10-11": "スポーツの日",
                "2027-11-03": "文化の日",
                "2027-11-23": "勤労感謝の日",
                "2028-01-01": "元日",
                "2028-01-10": "成人の日",
                "2028-02-11": "建国記念の日",
                "2028-02-23": "天皇誕生日",
                "2028-03-20": "春分の日",
                "2028-04-29": "昭和の日",
                "2028-05-03": "憲法記念日",
                "2028-05-04": "みどりの日",
                "2028-05-05": "こどもの日",
                "2028-07-17": "海の日",
                "2028-08-11": "山の日",
                "2028-09-18": "敬老の日",
                "2028-09-22": "秋分の日",
                "2028-10-09": "スポーツの日",
                "2028-11-03": "文化の日",
                "2028-11-23": "勤労感謝の日"
            };

            function ViewCalendar(date) {
                const currentMonth = date.getMonth();

                const month1 = createCalendar(date, currentMonth);
                const month2 = createCalendar(date, currentMonth + 1);

                document.getElementById('calendar1-title').innerHTML = month1.viewMonth + '月';
                document.getElementById('calendar2-title').innerHTML = month2.viewMonth + '月';

                document.getElementById('calendar1').innerHTML = month1.calendarHTML;
                document.getElementById('calendar2').innerHTML = month2.calendarHTML;

                document.getElementById('month-info1').innerHTML = createMonthInfo(month1)
                document.getElementById('month-info2').innerHTML = createMonthInfo(month2);
            }

            function createCalendar(today, currentMonth) {
                const monthDays = ["日", "月", "火", "水", "木", "金", "土"];
                const month = today.getMonth();
                const date = today.getDate();

                let calendarHTML = '<table class="calendar"><thead><tr>';

                for (let i = 0; i < 7; i++) {
                    if (i === 0) {
                        calendarHTML += `<th class="week sun">${monthDays[i]}</th>`;
                    } else if (i === 6) {
                        calendarHTML += `<th class="week sat">${monthDays[i]}</th>`;
                    } else {
                        calendarHTML += `<th class="week">${monthDays[i]}</th>`;
                    }
                }

                calendarHTML += '</tr></thead><tbody>';

                const daysInMonth = new Date(today.getFullYear(), currentMonth + 1, 0).getDate();
                const firstDay = new Date(today.getFullYear(), currentMonth, 1).getDay();

                const daysInPrevMonth = new Date(today.getFullYear(), currentMonth, 0).getDate();

                let dayCount = 1;
                let prevDayCount = daysInPrevMonth - firstDay + 1;

                let notHolidayCount = 0;

                for (let i = 0; i < 6; i++) {
                    calendarHTML += '<tr>';

                    for (let j = 0; j < 7; j++) {
                        if (i === 0 && j < firstDay) {
                            calendarHTML += `<td class="mute">${prevDayCount}</td>`;
                            prevDayCount++;
                        } else if (dayCount > daysInMonth) {
                            let nextMonthDayCount = dayCount - daysInMonth;
                            calendarHTML += `<td class="mute">${nextMonthDayCount}</td>`;
                            dayCount++;
                        } else {
                            var viewDay = today.getFullYear() + '-' + ('0' + (currentMonth + 1)).slice(-2) + '-' + ('0' + (dayCount)).slice(-2);

                            // 今日の日付
                            if (dayCount === date && month === currentMonth) {
                                calendarHTML += `<td class="today">${dayCount}</td>`;

                                // 平日
                                if (!holiday[viewDay] && j !== 0 && j !== 6) {
                                    notHolidayCount++;
                                }
                            }
                            // 祝日
                            else if (holiday[viewDay]) {
                                // <span class="holiday-title">${holiday[viewDay]}
                                calendarHTML += `<td class="holiday">${dayCount}</td>`;
                            }
                            // 日曜日
                            else if (j === 0) {
                                calendarHTML += `<td class="sun">${dayCount}</td>`;
                            }
                            // 土曜日
                            else if (j === 6) {
                                calendarHTML += `<td class="sat">${dayCount}</td>`;
                            }
                            // 平日
                            else {
                                calendarHTML += `<td>${dayCount}</td>`;

                                notHolidayCount++;
                            }
                            dayCount++;
                        }
                    }

                    calendarHTML += '</tr>';

                    if (dayCount - daysInMonth > 7) {
                        break;
                    }
                }

                calendarHTML += '</tbody></table>';

                return { viewMonth: (currentMonth + 1), calendarHTML, notHolidayCount };
            }

            function createMonthInfo(month) {
                return '<div class="month-calc-info">'
                    + '<p>' + month.viewMonth + '月の平日：' + month.notHolidayCount + '日  </p>'
                    + '<p>7.5H稼働だと' + (month.notHolidayCount * 7.5) + 'H</p>'
                    + '<p>8H稼働だと' + (month.notHolidayCount * 8) + 'H</p>'
                    + '</div>';
            }
        </script>
    </div>
</body>